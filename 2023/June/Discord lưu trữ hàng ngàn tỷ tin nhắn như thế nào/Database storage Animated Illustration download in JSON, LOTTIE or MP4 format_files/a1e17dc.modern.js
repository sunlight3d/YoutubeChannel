(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{2047:function(t,e,o){var content=o(3135);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(43).default)("5881165b",content,!0,{sourceMap:!1})},2742:function(t,e,o){"use strict";o.r(e);var n=o(11),r=o(6),l=o(1100),d=o(4318),c=o(1134),m=o.n(c),h=o(88),y=o(1122),f=o(2303);function v(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}function w(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var P={components:{BModal:d.a,UilTimes:l.a,Controls:f.a},mixins:[y.a],props:{item:{type:Object,default:()=>{}},brandPreview:{type:String,default:null},currentPreviewUrl:{type:String,default:null},hasCustomControls:{type:Boolean,default:!1}},data:()=>({isPlaying:!0,animationData:null,player:null,isCopied:!1,isLoadingAction:null}),computed:{showWatermark(){return!this.canItemDownload(this.item)}},methods:{generateSrcSetPx:h.c,generateMultipleFormats:h.a,onShown(){"lottie"===this.item.asset&&this.brandPreview&&(this.player=this.$refs.lottiePlayer,this.player.play(),this.hasCustomControls&&(this.animationData=this.player.getLottie()))},play(){this.player.play(),this.isPlaying=!0},pause(){this.player.pause(),this.isPlaying=!1},onClose(){this.$modal.close("modalItemPreviewFs")},preHandleAuth(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this.handleAuth()){if(this.canDownload)return!0;this.track("pricing",t);var e="".concat("https://iconscout.com").concat(this.$router.resolve(this.$helper.localize({name:"pricing"})).href);window.open(e,"_blank")}else this.track("auth");return!1},onDownload(){var t=this;return Object(r.a)((function*(){if(t.preHandleAuth("download"))if(t.isLoadingAction="download",yield t.preDownload({format:"svg",canBeBranded:!0,downloadUrl:!0,nuxtLoader:!1,via:"pdp-fs-player-controls"}))try{t.player.snapshot()}catch(e){console.error(e),t.toastMessage("Failed to download file")}finally{t.isLoadingAction=null}else{t.isLoadingAction=null;var e="Failed to fetch URL";console.error(e),t.toastMessage(e)}}))()},onCopy(){var t=this;return Object(r.a)((function*(){if(t.preHandleAuth())if(t.isLoadingAction="copy",yield t.preDownload({format:"svg",canBeBranded:!0,downloadUrl:!0,nuxtLoader:!1}))try{t.isCopied=!0;var e=(new DOMParser).parseFromString(t.player.snapshot(!1),"text/xml");e.getElementsByTagName("svg")[0].setAttribute("id",t.item.name),m()((new XMLSerializer).serializeToString(e)),setTimeout((()=>{t.isCopied=!1}),5e3),t.track("copied")}catch(o){console.error(o),t.toastMessage("Failed to copy file")}finally{t.isLoadingAction=null}else{t.isLoadingAction=null;var o="Failed to fetch URL";console.error(o),t.toastMessage(o)}}))()},track(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"copy";this.$analytics.track("".concat(e,"-product"),{route_path:this.$route.path,route_name:this.$route.name,location:"pdp-fs-player-controls",action:e,data:w({postAction:t,id:this.item.id,name:this.item.name,asset:this.item.asset,product_type:"item",price:this.item.payable_price,licenseId:this.item.license_id},this.$store.getters["brandPalettes/selectedPalette"]&&{brand_palette_id:this.$store.getters["brandPalettes/selectedPalette"].id})})},toastMessage(title){this.$root.$bvToast.toast(title,{title:title,variant:"danger",toaster:"b-toaster-bottom-center",solid:!1,noAutoHide:!1,bodyClass:"d-none"})}}},_=P,k=o(3134),x=o(8);var component=Object(x.a)(_,(function(){var t=this,e=t._self._c;return e("b-modal",{attrs:{id:"modalItemPreviewFs","modal-class":t.$style.modal,visible:"",centered:"","no-fade":"","hide-header":"","hide-footer":""},on:{shown:t.onShown,hidden:t.onClose}},[e("a",{class:["btn btn-md btn-icon",t.$style.close],attrs:{href:"#"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.onClose.apply(null,arguments)}}},[e("uil-times")],1),t._v(" "),"lottie"===t.item.asset?[t.brandPreview?e("div",{staticClass:"flex-column"},[e("lottie-player",{ref:"lottiePlayer",class:[t.$style.lottie,t.hasCustomControls?"pb-8":null,t.showWatermark?t.$style.watermark:null],attrs:{src:t.brandPreview,loop:""}}),t._v(" "),t.hasCustomControls&&t.animationData?e("controls",{class:t.$style.controlPosition,attrs:{"is-playing":t.isPlaying,animation:t.animationData,"is-loading":t.isLoadingAction,"is-copied":t.isCopied,item:t.item,client:"pdp-fs"},on:{copySvg:t.onCopy,downloadSvg:t.onDownload,play:t.play,pause:t.pause}}):t._e()],1):e("div",{on:{click:t.onClose}},[e("video",{attrs:{src:t.currentPreviewUrl,autoplay:"",muted:"",loop:"",playsinline:"",type:"video/mp4"},domProps:{muted:!0}})])]:[t.brandPreview&&t.isLoggedIn?e("div",{class:t.showWatermark?t.$style.watermark:null,on:{click:t.onClose}},[e("img",{key:t.item.id,attrs:{src:t.brandPreview,alt:t.name}})]):e("div",{on:{click:t.onClose}},[e("picture",[e("source",t._b({},"source",t.generateMultipleFormats({url:t.currentPreviewUrl,h:700}),!1)),t._v(" "),e("img",t._b({attrs:{alt:t.name}},"img",t.generateSrcSetPx({url:t.currentPreviewUrl,h:700,format:"webp"}),!1))])])]],2)}),[],!1,(function(t){this.$style=k.default.locals||k.default}),null,null);e.default=component.exports},3134:function(t,e,o){"use strict";var n=o(2047),r=o.n(n);o.d(e,"default",(function(){return r.a}))},3135:function(t,e,o){var n=o(42),r=o(322),l=o(1306),d=n(!1),c=r(l);d.push([t.i,".modal_iaY5v .modal-dialog{width:100vw;height:100vh;max-width:initial;margin:0 auto;padding:3.125rem}@media (max-width: 1023.98px){.modal_iaY5v .modal-dialog{margin:0 auto}}.modal_iaY5v .modal-dialog .modal-content{width:100%;margin:0 auto;height:100%;border-radius:0;background:transparent}.modal_iaY5v .modal-dialog .modal-content .modal-body{width:100%;height:100%;padding:0}.modal_iaY5v .modal-dialog .modal-content .modal-body>div{width:100%;height:100%;text-align:center;display:flex;align-items:center;justify-content:center}.modal_iaY5v .modal-dialog .modal-content .modal-body img,.modal_iaY5v .modal-dialog .modal-content .modal-body video{max-width:100%;max-height:100%;margin:0 auto;background:#fff;pointer-events:none}.modal_iaY5v .close_GocI3{display:block;position:fixed;top:.9375rem;right:.9375rem;z-index:9999;border-radius:50%;background:#fff;font-size:1.5rem;color:#000;box-shadow:none !important}.lottie_71yYH{width:auto;height:100%;overflow:hidden;margin:0 auto;background:#fff}.watermark_XG40e:before{position:absolute;content:'';background-image:url("+c+");background-repeat:no-repeat;background-position:center;opacity:0.7;width:100%;height:100%;pointer-events:none;z-index:1042;top:0;left:0}.controlPosition_GDVpw{position:absolute;bottom:8px;left:50%;transform:translateX(-50%)}\n",""]),d.locals={modal:"modal_iaY5v",close:"close_GocI3",lottie:"lottie_71yYH",watermark:"watermark_XG40e",controlPosition:"controlPosition_GDVpw"},t.exports=d}}]);
//# sourceMappingURL=a1e17dc.modern.js.map